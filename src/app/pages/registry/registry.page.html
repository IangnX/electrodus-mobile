<ion-content scrollY="true">

  <ion-card >
    <ion-card-content>
      <ion-card-header>
        <ion-card-title>
            <ion-text>
              <h1>Registrarse</h1>
            </ion-text>
        </ion-card-title>
      </ion-card-header>

        <form class="form" [formGroup]="form" (ngSubmit)="registry()">
          <ion-item lines="full">
            <ion-label position="floating"><ion-icon name="person-outline"></ion-icon> Nombre</ion-label>
            <ion-input formControlName="name" [clearInput]="true" required> </ion-input>
          </ion-item>
          <span *ngIf="validFieldRequired('name')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>
          <span *ngIf="validFieldMinLength('name')">
            <ion-label>* El minimo de caracteres es 4</ion-label>
          </span>

          <ion-item lines="full">
            <ion-label position="floating"><ion-icon name="person-outline"></ion-icon> Apellido</ion-label>
            <ion-input formControlName="lastName" [clearInput]="true" required></ion-input>
          </ion-item>
          <span *ngIf="validFieldRequired('lastName')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>
          <span *ngIf="validFieldMinLength('lastName')">
            <ion-label>* El minimo de caracteres es 4</ion-label>
          </span>

          <ion-item lines="full">
            <ion-label position="floating"><ion-icon name="person-circle-outline"></ion-icon> Cedula</ion-label>
            <ion-input formControlName="dni" [clearInput]="true" required min="0" type="number"></ion-input>
          </ion-item>

          <span *ngIf="validFieldRequired('dni')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>
          <span *ngIf="validFieldMinLength('dni')">
            <ion-label>* El minimo de caracteres es 8</ion-label>
          </span>

          <ion-item lines="full">
            <ion-label position="floating"><ion-icon name="mail-outline"></ion-icon> Correo</ion-label>
            <ion-input formControlName="email" type="email" [clearInput]="true" required></ion-input>
          </ion-item>
          <div *ngIf="validFieldPattern('email')">
            <ion-label >* Formato de email invalido</ion-label>
          </div>
          <span *ngIf="validFieldRequired('email')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>

          <ion-item>
            <ion-label position="floating"><ion-icon name="key-outline"></ion-icon> Contrase単a</ion-label>
            <ion-input formControlName="password" type="password" required></ion-input>
          </ion-item>
          <span *ngIf="validFieldRequired('password')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>
          <span *ngIf="validFieldMinLength('password')">
            <ion-label>* El minimo de caracteres es 8</ion-label>
          </span>
          <span *ngIf="validFieldPassword()">
            <ion-label>* Contrase単as no coinciden</ion-label>
          </span>

          <ion-item>
            <ion-label position="floating"><ion-icon name="key-outline"></ion-icon> Confirmar Contrase単a</ion-label>
            <ion-input formControlName="confirmPassword" type="password" ></ion-input>
          </ion-item>
          <span *ngIf="validFieldRequired('confirmPassword')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>
          <span *ngIf="validFieldMinLength('confirmPassword')">
            <ion-label>* El minimo de caracteres es 8</ion-label>
          </span>
          <span *ngIf="validFieldPassword()">
            <ion-label>* Contrase単as no coinciden</ion-label>
          </span>

          <ion-item lines="full">
            <ion-row>
              <ion-col>
                <ion-label  class="lbl-birthday"><ion-icon name="calendar-outline"></ion-icon> Fecha de nacimiento</ion-label>
              </ion-col>
              <ion-col>
                <ion-datetime-button  color="primary"  datetime="datetime" presentation="date" ></ion-datetime-button>
              </ion-col>
            </ion-row>
          </ion-item>
          <span *ngIf="validFieldRequired('birthday')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>


          <ion-modal [keepContentsMounted]="true">
            <ng-template>
              <ion-datetime formatOptions="YYYY-MM-DD" (ionChange)="setBirthday($event)"  [showDefaultButtons]="true" id="datetime" presentation="date" [preferWheel]="true"></ion-datetime>
            </ng-template>
          </ion-modal>

          <ion-item lines="full">
            <ion-icon name="transgender-outline"></ion-icon>
            <ion-select label="Genero" (ionChange)="setGender($event)">
              <ion-select-option value="Masculino">Masculino</ion-select-option>
              <ion-select-option value="Femenino">Femenino</ion-select-option>
              <ion-select-option value="Otro">Otro</ion-select-option>
            </ion-select>
          </ion-item>
          <span *ngIf="validFieldRequired('gender')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>

          <ion-item lines="full">
            <ion-icon name="earth-outline"></ion-icon>
            <ion-select label="Estado" (ionChange)="changeState($event)">
              <ion-select-option *ngFor="let state of states" [value]="state.state_name">{{ state.state_name}}</ion-select-option>
            </ion-select>
          </ion-item>
          <span *ngIf="validFieldRequired('state')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>

          <ion-item lines="full">
            <ion-icon name="home-outline"></ion-icon>
            <ion-select label="Ciudad" (ionChange)="changeCity($event)">
              <ion-select-option *ngFor="let city of cities" [value]="city.city_name">{{ city.city_name}}</ion-select-option>
            </ion-select>
          </ion-item>
          <span *ngIf="validFieldRequired('city')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>

          <ion-item>
            <ion-label  position="floating"><ion-icon name="call-outline"></ion-icon> Telefono</ion-label>
            <ion-input formControlName="phoneNumber" type="tel" ></ion-input>
          </ion-item>
          <span *ngIf="validFieldRequired('phoneNumber')">
            <ion-label>* Campo obligatorio</ion-label>
          </span>

          <ion-row>
            <ion-col>
              <ion-button type="submit" shape="round" class="btn-login" expand="block">Registrarse</ion-button>
            </ion-col>
          </ion-row>
        </form>

    </ion-card-content>
  </ion-card>
</ion-content>

<ion-footer class="footer" >
  <ion-toolbar>
      <ion-card-content>
        <ion-label  >Ya tienes una cuenta.  </ion-label>             <ion-label color="primary" (click)="goToLogin()" >Ingresar</ion-label>
      </ion-card-content>
  </ion-toolbar>
</ion-footer>
